# 项目任务清单 (TODO)

根据我们最近的讨论，以下是为实现“交互式像素编辑”功能需要完成的开发任务。

## 核心功能：交互式像素编辑器

- [x] **UI实现：调色板**
    - [x] 在预览面板旁边创建一个新的UI区域用于显示调色板。
    - [x] 动态加载JSON中的`palette`数据并以可选色块的形式展示。
    - [x] 实现颜色选择逻辑，记录当前用户选中的颜色。

- [ ] **预览画布：事件绑定**
    - [ ] 为预览画布（Canvas）绑定鼠标左键和右键的点击事件。
    - [ ] 实现一个坐标转换函数，将屏幕像素坐标映射到像素画网格坐标（例如 `(25, 40) -> (row: 2, col: 5)`）。

- [ ] **核心编辑逻辑**
    - [ ] 实现左键点击绘制功能：获取点击的网格坐标和当前选中的颜色，更新内部数据结构。
    - [ ] 实现右键点击擦除功能：获取点击的网格坐标，将对应数据设置为背景色（通常是`0`）。

- [ ] **数据双向同步**
    - [ ] **画布 -> JSON：** 当用户在画布上修改后，立刻更新左侧JSON文本框中的`pixels`或`frames`数据。
    - [ ] **JSON -> 画布：** （此功能可能已存在）确保当JSON文本框内容改变时，预览画布会重新渲染。

## 核心功能：动画编辑控制器

- [ ] **UI实现：动画控制条**
    - [ ] 在预览面板下方添加一个新的UI容器作为控制条。
    - [ ] 在控制条中添加以下控件：
        - [ ] 一个“播放/暂停”按钮。
        - [ ] 一个“上一帧”按钮。
        - [ ] 一个“下一帧”按钮。
        - [ ] 一个显示“当前帧 / 总帧数”的文本标签。
        - [ ] (可选) 一个可以拖动的帧滑块。

- [ ] **动画播放逻辑**
    - [ ] 重构现有的动画播放循环，使其可以被“播放/暂停”按钮控制。
    - [ ] 实现“上一帧”/“下一帧”按钮的逻辑，使其能正确更新当前显示的帧。
    - [ ] 将UI状态（如当前帧号）与播放逻辑同步。

- [ ] **帧编辑逻辑**
    - [ ] 将画布的编辑功能与动画状态关联：只有在“暂停”状态下才允许编辑。
    - [ ] 确保在编辑时，修改只作用于当前显示的帧数据。
    - [ ] 更新数据同步逻辑，使其能准确地修改JSON中`frames`数组里对应帧的数据。